define("tpl!taoRevision/controller/history/line",["handlebars"],function(hb){return hb.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,Handlebars="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return Handlebars+='<tr>\n    <td class="numeric">',stack1=(helper=helpers.id)||typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,Handlebars+=escapeExpression(stack1)+'</td>\n    <td class="date">',stack1=(helper=helpers.modified)||typeof(
helper=depth0&&depth0.modified)===functionType?helper.call(depth0,{hash:{},data:data}):helper,Handlebars+=escapeExpression(stack1)+'</td>\n    <td class="user">',!(stack1=(helper=helpers.author)||typeof(helper=depth0&&depth0.author)===functionType?helper.call(depth0,{hash:{},data:data}):helper)&&0!==stack1||(Handlebars+=stack1),Handlebars+='</td>\n    <td class="message">',stack1=(helper=helpers.message)||typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper,Handlebars+=escapeExpression(stack1)+"</td>\n    ",!(stack1=helpers.if.call(depth0,depth0&&depth0.allowRestoreRevision,{hash:{},inverse:this.noop,
fn:this.program(1,function(depth0,data){var helper,stack1,buffer="";return buffer+='\n    <td class="actions">\n        <button class="btn-info small restore_revision" data-revision="',stack1=(helper=helpers.id)||typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'">\n            <span class="icon-undo"></span>\n            '+escapeExpression((stack1={hash:{},data:data},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Restore",stack1):helperMissing.call(depth0,"__","Restore",stack1)))+"\n        </button>\n    </td>\n    "},data),data:data}))&&0!==stack1||(
Handlebars+=stack1),Handlebars+="\n</tr>"})}),define("taoRevision/controller/history/index",["jquery","i18n","tpl!taoRevision/controller/history/line","helpers","ui/feedback","select2","ui/tooltip"],function($,__,lineTpl,helpers,feedback){"use strict";return{start:function(){var $container=$(".revision-container"),$form=$("form",$container),$submiter=$(":submit",$form),$container=$("#revisions-table"),body=$container.find("tbody")[0];$form.on("submit",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$submiter.on("click",function(e){e.preventDefault();var $message=$("#message",$form);""!==$message.val()?($submiter.addClass("disabled"),$.post(
$form.attr("action"),$form.serialize()).done(function(res){res&&res.success?(feedback().success(res.commitMessage),$(body).append(lineTpl(res))):feedback().error(__("Something went wrong..."))}).complete(function(){$submiter.removeClass("disabled"),$message.val("")})):feedback().error(__("Please give a message to your commit"))}),$container.on("click",".restore_revision",function(event){var body,id,message;event.preventDefault(),event=this,body=$("#revisions-table").find("tbody")[0],event=$(event).data("revision"),id=$("#resource_id").val(),message=prompt(__("Please enter a message"),__("Restored version %s",event)),
void 0!==event&&void 0!==message&&null!=message&&""!==event&&""!==message&&$.post(helpers._url("restoreRevision","History","taoRevision"),{id:id,revisionId:event,message:message}).done(function(res){res&&res.success?(feedback().success(__("Resource restored")),$(body).append(lineTpl(res)),$(".tree").trigger("refresh.taotree")):feedback().error(__("Something went wrong..."))})})}}}),define("taoRevision/controller/routes",[],function(){return{History:{actions:{index:"controller/history/index"}}}}),define("taoRevision/loader/taoRevision.bundle",function(){});
//# sourceMappingURL=taoRevision.min.js.map