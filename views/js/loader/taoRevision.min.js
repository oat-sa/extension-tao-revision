define("tpl!taoRevision/controller/history/line",["handlebars"],function(hb){return hb.template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'    <td class="actions">\n        <button class="btn-info small restore_revision" data-revision="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"id")||(null!=depth0?lookupProperty(depth0,"id"):depth0))?helper:container.hooks.helperMissing)?helper.call(
null!=depth0?depth0:container.nullContext||{},{name:"id",hash:{},data:data,loc:{start:{line:8,column:71},end:{line:8,column:77}}}):helper)+'">\n            <span class="icon-undo"></span>\n            '+container.escapeExpression((lookupProperty(helpers,"__")||depth0&&lookupProperty(depth0,"__")||container.hooks.helperMissing).call(null!=depth0?depth0:container.nullContext||{},"Restore",{name:"__",hash:{},data:data,loc:{start:{line:10,column:12},end:{line:10,column:28}}}))+"\n        </button>\n    </td>\n"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,lookupProperty=container.lookupProperty||function(parent
,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<tr>\n    <td class="numeric">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"id")||(null!=depth0?lookupProperty(depth0,"id"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"id",hash:{},data:data,loc:{start:{line:2,column:24},end:{line:2,column:30}}}):helper)+'</td>\n    <td class="date">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"modified")||(null!=depth0?lookupProperty(depth0,"modified"
):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"modified",hash:{},data:data,loc:{start:{line:3,column:21},end:{line:3,column:33}}}):helper)+'</td>\n    <td class="user">'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"author")||(null!=depth0?lookupProperty(depth0,"author"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"author",hash:{},data:data,loc:{start:{line:4,column:21},end:{line:4,column:33}}}):helper)?stack1:"")+'</td>\n    <td class="message">'+container.escapeExpression("function"==typeof(
helper=null!=(helper=lookupProperty(helpers,"message")||(null!=depth0?lookupProperty(depth0,"message"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"message",hash:{},data:data,loc:{start:{line:5,column:24},end:{line:5,column:35}}}):helper)+"</td>\n"+(null!=(stack1=lookupProperty(helpers,"if").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"allowRestoreRevision"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:6,column:4},end:{line:13,column:11}}}))?stack1:"")+"</tr>"},useData:!0})}),define(
"taoRevision/controller/history/index",["jquery","i18n","tpl!taoRevision/controller/history/line","helpers","ui/feedback","select2","ui/tooltip"],function($,__,lineTpl,helpers,feedback){"use strict";return{start:function(){var $container=$(".revision-container"),$form=$("form",$container),$submiter=$(":submit",$form),$container=$("#revisions-table"),body=$container.find("tbody")[0];$form.on("submit",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$submiter.on("click",function(e){e.preventDefault();var $message=$("#message",$form);""!==$message.val()?($submiter.addClass("disabled"),$.post($form.attr("action"),$form.serialize()).done(function(res
){res&&res.success?(feedback().success(res.commitMessage),$(body).append(lineTpl(res))):feedback().error(__("Something went wrong..."))}).complete(function(){$submiter.removeClass("disabled"),$message.val("")})):feedback().error(__("Please give a message to your commit"))}),$container.on("click",".restore_revision",function(event){var body,id,message;event.preventDefault(),event=this,body=$("#revisions-table").find("tbody")[0],event=$(event).data("revision"),id=$("#resource_id").val(),message=prompt(__("Please enter a message"),__("Restored version %s",event)),void 0!==event&&void 0!==message&&null!=message&&""!==event&&""!==message&&$.post(helpers._url(
"restoreRevision","History","taoRevision"),{id:id,revisionId:event,message:message}).done(function(res){res&&res.success?(feedback().success(__("Resource restored")),$(body).append(lineTpl(res)),$(".tree").trigger("refresh.taotree")):feedback().error(__("Something went wrong..."))})})}}}),define("taoRevision/controller/routes",[],function(){return{History:{actions:{index:"controller/history/index"}}}}),define("taoRevision/loader/taoRevision.bundle",function(){});
//# sourceMappingURL=taoRevision.min.js.map