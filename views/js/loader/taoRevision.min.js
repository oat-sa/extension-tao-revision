define("tpl!taoRevision/controller/history/line",["handlebars"],function(hb){return hb.template(function(stack1,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,stack1.helpers),data=data||{};var helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<tr>\n    <td class="numeric">',stack1=(helper=helpers.id)||typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</td>\n    <td class="date">',stack1=(helper=helpers.modified)||typeof(helper=depth0&&depth0.modified
)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+'</td>\n    <td class="user">',!(stack1=(helper=helpers.author)||typeof(helper=depth0&&depth0.author)===functionType?helper.call(depth0,{hash:{},data:data}):helper)&&0!==stack1||(buffer+=stack1),buffer+='</td>\n    <td class="message">',stack1=(helper=helpers.message)||typeof(helper=depth0&&depth0.message)===functionType?helper.call(depth0,{hash:{},data:data}):helper,buffer+=escapeExpression(stack1)+"</td>\n    ",!(stack1=helpers.if.call(depth0,depth0&&depth0.allowRestoreRevision,{hash:{},inverse:this.noop,fn:this.program(1,function(depth0,options){var stack1,
helper,buffer="";return buffer+='\n    <td class="actions">\n        <button class="btn-info small restore_revision" data-revision="',stack1=(helper=helpers.id)||typeof(helper=depth0&&depth0.id)===functionType?helper.call(depth0,{hash:{},data:options}):helper,buffer+=escapeExpression(stack1)+'">\n            <span class="icon-undo"></span>\n            '+escapeExpression((options={hash:{},data:options},(helper=helpers.__||depth0&&depth0.__)?helper.call(depth0,"Restore",options):helperMissing.call(depth0,"__","Restore",options)))+"\n        </button>\n    </td>\n    "},data),data:data}))&&0!==stack1||(buffer+=stack1),buffer+="\n</tr>"})}),define(
"taoRevision/controller/history/index",["jquery","i18n","tpl!taoRevision/controller/history/line","helpers","ui/feedback","select2","ui/tooltip"],function($,__,lineTpl,helpers,feedback){"use strict";return{start:function(){var $table=$(".revision-container"),$form=$("form",$table),$submiter=$(":submit",$form),$table=$("#revisions-table"),body=$table.find("tbody")[0];$form.on("submit",function(e){e.preventDefault(),e.stopImmediatePropagation()}),$submiter.on("click",function(e){e.preventDefault();var $message=$("#message",$form);""!==$message.val()?($submiter.addClass("disabled"),$.post($form.attr("action"),$form.serialize()).done(function(res){
res&&res.success?(feedback().success(res.commitMessage),$(body).append(lineTpl(res))):feedback().error(__("Something went wrong..."))}).complete(function(){$submiter.removeClass("disabled"),$message.val("")})):feedback().error(__("Please give a message to your commit"))}),$table.on("click",".restore_revision",function(id){var message,body,revision;id.preventDefault(),message=this,body=$("#revisions-table").find("tbody")[0],revision=$(message).data("revision"),id=$("#resource_id").val(),message=prompt(__("Please enter a message"),__("Restored version %s",revision)),void 0!==revision&&void 0!==message&&null!=message&&""!==revision&&""!==message&&$.post(
helpers._url("restoreRevision","History","taoRevision"),{id:id,revisionId:revision,message:message}).done(function(res){res&&res.success?(feedback().success(__("Resource restored")),$(body).append(lineTpl(res)),$(".tree").trigger("refresh.taotree")):feedback().error(__("Something went wrong..."))})})}}}),define("taoRevision/controller/routes",[],function(){return{History:{actions:{index:"controller/history/index"}}}}),define("taoRevision/loader/taoRevision.bundle",function(){});
//# sourceMappingURL=taoRevision.min.js.map